## Table of Contents

  - [Table of Contents](#Table\of\Contents)
          - [IP Address](#IP\Address)
          - [Hosts](#Hosts)
          - [Users Last Login](#Users\Last\Login)
          - [Logged In Users](#Logged\In\Users)
          - [History & Finding History files](#History\&\Finding\History\files)
          - [Cron Jobs/Cron Tabs](#Cron\Jobs/Cron\Tabs)
          - [Proc Filesystem](#Proc\Filesystem)
      - [Services](#Services)
          - [Installed Packages](#Installed\Packages)
          - [Check Sudo Version](#Check\Sudo\Version)
          - [Binaries](#Binaries)
          - [GTFOBins](#GTFOBins)
          - [Trace System Calls](#Trace\System\Calls)
          - [Configuration Files](#Configuration\Files)
          - [Scripts](#Scripts)
          - [Runing Services by User](#Runing\Services\by\User)

## Table of Contents

- [IP Address](#IP\Address)
          - [Hosts](#Hosts)
          - [Users Last Login](#Users\Last\Login)
          - [Logged In Users](#Logged\In\Users)
          - [History & Finding History files](#History\&\Finding\History\files)
          - [Cron Jobs/Cron Tabs](#Cron\Jobs/Cron\Tabs)
          - [Proc Filesystem](#Proc\Filesystem)
      - [Services](#Services)
          - [Installed Packages](#Installed\Packages)
          - [Check Sudo Version](#Check\Sudo\Version)
          - [Binaries](#Binaries)
          - [GTFOBins](#GTFOBins)
          - [Trace System Calls](#Trace\System\Calls)
          - [Configuration Files](#Configuration\Files)
          - [Scripts](#Scripts)
          - [Runing Services by User](#Runing\Services\by\User)

The infomation from the environment will lay the land for further enumeration through the info we gained about our user and group permissions as they relate to files, scipts, binaries, directories etc. Things such as the internals of the Host Operating System. In this phase, we will enumerate the following which will help to inform many of the attacks discussed:
- What services and applications are installed?
- What services are running?
- What sockets are in use?
- What users, admins, and groups exist on the system?
- Who is currently logged in? What users recently logged in?
- What password policies, if any, are enforced on the host?
- Is the host joined to an Active Directory domain?
- What types of interesting information can we find in history, log, and backup files.
- Which files have been modified recently and how often? Are there any interesting patterns in file modification that could indicate a crong job in use that we may be able ot hijack?
- Current IP Addressing Information
- `/etc/hosts` - Any other interesting information?
- Any interesting Network connections to other systems in the internal network?
- What tools are installed on the system that we may be able to take advantage of (`netcat, perl, python, ruby, nmap, tcpdump, gcc, etc.`)
- `bash_history`
- Any Cron Jobs running?
###### IP Address
```bash
ip -a
```
###### Hosts
```bash
cat /etc/hosts
```
###### Users Last Login
```bash
lastlog
```
###### Logged In Users
```bash
w  #this command check's for logged in users
```
- Make sure to check the user's bash history as well. 
###### History & Finding History files
```bash
find / -type f \( -name *_hist -o -name *_histroy \) -exec ls {} \; 2>/dev/null
```
###### Cron Jobs/Cron Tabs
```bash
ls -la /etc/cron.daily
```
- Cron Jobs/Tabs are simply scheduled tasks that run similarly to Windows Scheduled tasks. Often set up to perform maintenance and backup tasks. With other misconfigurations such as relative paths or weak permissions, they can be leveraged to escalate privileges when the scheduled cron job runs
###### Proc Filesystem
`proc/procfs` - Particular filesystem in Linux that contains information about system processes, hardware, and othe rsystem information. It's the primary way to access process information and can be used to view and modify kernel settings. It's a virtual file system and does not exist as a real filesystem but is dynamically generated by the kernel. It's used to look up system information such as the state of running processes, kernel parameters, system memory, and devices. It also sets certain system parameters such as process priority, scheduling, and memory allocation
```bash
find /proc -name cmdline -exec cat {} \; 2>/dev/null | tr " " "\n"
```
___
#### Services
If it's an older Linux system, the likelihood increases that we can find installed packages that may already have at least one vulnerability. Current versions of Linux distributions can also have older packages or software installed that may have such vulnerabilities. Thus, we need a method to help us detect potentially dangerous packages in a bit. First, we must create a list of installed packages to work with.
###### Installed Packages
```bash
apt list --installed | tr "/" " " | cut -d" " -f1,3 | sed 's/[0-9]://g'
```
###### Check Sudo Version
```bash
sudo -V
```
###### Binaries
```bash
ls -la /bin /usr/bin /usr/sbin
```
[GTFOBins](https://gtfobins.github.io/) Provides information on a list of binaries that can potentially be exploited to escalate our privileges on the target system. With the oneline below, we can compare the existing binaries with the ones from GTFOBins to we which binaries we should investigate
###### GTFOBins
```bash
for i in $(curl -s https://gtfobins.github.io/ | html2text | cut -d" ") -f1 | sed '/^[[:space:]]*$/d');do if grep -q "$i" installed_pkgs.list;then echo "Check GTFO for: $i";fi;done
```
- We can then use the diagnostic tool `strace` on Linux-based operating systems to track and analyze system calls and signal processing. It allows us to follow the flow of a program and understand how it accesses system resources, processes signals, and recieves and sends data from the operating system. This tool can also be helpful to monitor security-related activities and identify potential attack vectors, such as specific requests to remote hosts using passwords or tokens
###### Trace System Calls
```bash
strace ping -c1 MACHINE.IP
```
- **Users can read almost all configuration files on a Linux Operating system** if the administrator has kept them the same. These configuration files can often reveal how the service is set up and configured to understand better how we can use it for our purposes. 
- These files often contain sensitive information, such as keys, and paths to files ini folders that we cannot see. **However if the file has read permissions we can still read the file even if we do not have permission to read the folder**
###### Configuration Files
```bash
find / -type f \( -name *.conf -o -name *.config \) -exec ls -l {} \; 2>/dev/null
```
###### Scripts
- Lazy administrators often neglect network security and the internal security of their systems. These scripts, in some cases, have the wrong privileges and can be used in further investigation
```bash
find / -type f -name "*.sh" 2>/dev/null | grep -v "src\|snap\|share"
```
- If we look at the process list, it can give us information about which scripts or binaries are in use and under which user. 
	- Ex: If a script is created by the admin in his path and whose rights have not been restricted, we can run it through going into the `root` directory
###### Runing Services by User
```bash
ps aux | grep <USER>
```

**What is the latest python version installed on the system?**
```bash
dpkg -l | grep -i python
```
**A:** `3.11`












