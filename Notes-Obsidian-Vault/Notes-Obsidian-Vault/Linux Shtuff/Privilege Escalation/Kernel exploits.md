## Table of Contents

  - [Table of Contents](#Table\of\Contents)
  - [Table of Contents](#Table\of\Contents)
  - [Kernel Exploit Example](#Kernel\Exploit\Example)

## Table of Contents

  - [Table of Contents](#Table\of\Contents)
  - [Kernel Exploit Example](#Kernel\Exploit\Example)

## Table of Contents

  - [Kernel Exploit Example](#Kernel\Exploit\Example)

- **Dirty Cow (CVE-2016-5195)**


Kernel exploits are vulnerabilities that leverage errors in the kernel to execute code with root privileges. It's common to find systems that are vulnerable to kernel exploits. It can be hard to keep track of legacy systems. They are often excluded from patching due to compatibility issues with certain services and applications.

Privilege escalation using a kernel exploit can be as simple as downloading, compiling, and running it. Some of these exploits work out of the box, while other's require modification. A quick way to identify kernel exploits is to issue the command:
```bash
uname -a
```
and search google for the Kernel version and any known exploits.


## Kernel Exploit Example

Let's start by checking the Kernel level and Linux OS version.

Kernel Exploits

```shell
gdxqpardo@htb[/htb]$ uname -a

Linux NIX02 4.4.0-116-generic #140-Ubuntu SMP Mon Feb 12 21:23:04 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
```


```shell
gdxqpardo@htb[/htb]$ cat /etc/lsb-release 

DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=16.04
DISTRIB_CODENAME=xenial
DISTRIB_DESCRIPTION="Ubuntu 16.04.4 LTS"
```

We can see that we are on Linux Kernel 4.4.0-116 on an Ubuntu 16.04.4 LTS box. A quick Google search for `linux 4.4.0-116-generic exploit` comes up with [this](https://vulners.com/zdt/1337DAY-ID-30003) exploit PoC. Next download, it to the system using `wget` or another file transfer method. We can compile the exploit code using [gcc](https://linux.die.net/man/1/gcc) and set the executable bit using `chmod +x`.

```shell
gdxqpardo@htb[/htb]$ gcc kernel_exploit.c -o kernel_exploit && chmod +x kernel_exploit
```

Next, we run the exploit and hopefully get dropped into a root shell.

```shell
gdxqpardo@htb[/htb]$ ./kernel_exploit 

task_struct = ffff8800b71d7000
uidptr = ffff8800b95ce544
spawning root shell
```


