## Table of Contents

- [User Enumeration](#user\enumeration)
  - [First Method](#First\Method)
      - [Existing User](#Existing\User)
      - [Non-Existing User](#Non-Existing\User)
  - [Second Method](#Second\Method)
      - [JSON Endpoint](#JSON\Endpoint)
- [Login](#login)

# User Enumeration

Enumerating a list of valid users is a critical phase of a WordPress security assessment. Armed with this list, we may be able to guess default credentials or perform a brute force password attack. If successful, we may be able to log in to the WordPress backend as an author or even as an administrator. This access can potentially be leveraged to modify the WordPress website or even interact with the underlying web server.

## First Method

The first method is reviewing posts to uncover the ID assigned to the user and their corresponding username. If we mouse over the post author link titled "by admin," as shown in the below image, a link to the user's account appears in the web browser's lower-left corner.

![image](https://academy.hackthebox.com/storage/modules/17/by-admin.png)

The `admin` user is usually assigned the user ID `1`. We can confirm this by specifying the user ID for the `author` parameter in the URL.

`http://blog.inlanefreight.com/?author=1`


#### Existing User

```shell
gdxqpardo@htb[/htb]$ curl -s -I -X GET http://blog.inlanefreight.com/?author=1
```

#### Non-Existing User

```shell
gdxqpardo@htb[/htb]$ curl -s -I -X GET http://blog.inlanefreight.com/?author=100
```

---

## Second Method

The second method requires interaction with the `JSON` endpoint, which allows us to obtain a list of users. This was changed in WordPress core after version 4.7.1, and later versions only show whether a user is configured or not. Before this release, all users who had published a post were shown by default.

#### JSON Endpoint

User Enumeration

```shell
gdxqpardo@htb[/htb]$ curl http://blog.inlanefreight.com/wp-json/wp/v2/users | jq

[
  {
    "id": 1,
    "name": "admin",
    "url": "",
    "description": "",
    "link": "http://blog.inlanefreight.com/index.php/author/admin/",
    <SNIP>
  },
  {
    "id": 2,
    "name": "ch4p",
    "url": "",
    "description": "",
    "link": "http://blog.inlanefreight.com/index.php/author/ch4p/",
    <SNIP>
  },
<SNIP>
```


# Login

---

Once we are armed with a list of valid users, we can mount a password brute-forcing attack to attempt to gain access to the WordPress backend. This attack can be performed via the login page or the `xmlrpc.php` page.

If our POST request against `xmlrpc.php` contains valid credentials, we will receive the following output:

