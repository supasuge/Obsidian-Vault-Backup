## Table of Contents

  - [First boot](#First\boot)
      - [Packages](#Packages)
  - [Xorg configuration](#Xorg\configuration)
    - [Manual configuration](#Manual\configuration)
      - [Minimal configuration](#Minimal\configuration)
    - [Build and Test Instruction](#Build\and\Test\Instruction)
      - [Disabling the logo on startup](#Disabling\the\logo\on\startup)
      - [Overriding monitor detection](#Overriding\monitor\detection)
- [yay - arguments](#yay\-\arguments)
  - [Examples of Custom Operations](#Examples\of\Custom\Operations)
    - [Yay Command-Line Arguments](#Yay\Command-Line\Arguments)
    - [Pacman](#Pacman)
    - [Yay](#Yay)
    - [Pacman Command-Line Arguments](#Pacman\Command-Line\Arguments)
      - [Pacman Examples:](#Pacman\Examples:)
    - [Yay Command-Line Arguments](#Yay\Command-Line\Arguments)
      - [Yay Examples:](#Yay\Examples:)
    - [Post-Installation:](#Post-Installation:)
    - [iwctl Commands](#iwctl\Commands)
    - [Troubleshooting with iwctl, rfkill, and ip link](#Troubleshooting\with\iwctl,\rfkill,\and\ip\link)

https://askubuntu.com/questions/70552/cant-adjust-brightness-on-my-msi-vr420-laptop/104803#104803

https://wiki.archlinux.org/title/Laptop/Lenovo - Legion 5i

1. `iwctl`
2. `rfkill` if blocked
3. `ping google.com`
4. `pacman-key --init`
5. `pacman-key --populate archlinux`
6. `archinstall`
7. `language`
8. `mirros > US`
9. `Drive 1Tb SSD`
10. `Disk laylout - wipe all `
11. `ext4`
12. `set root password`
13. `new user account`
14. `profile > minimal install`
15. `pipewire`
16. `American/Detorit`
17. `optional-repo's: multi-lib`
18. arch-chroot: no, reboot
## First boot
`nmcli device wifi connect <SSID> password <password>`
```bash
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si
yay -Syu
```


#### Packages
`dkms`, `nvidia-dkms`, `nvidia`, `nvidia-settings`, `python312`, `mesa`, `intel-ucode`, `dosfstools`,  `nano`, `base-devel`


https://aur.archlinux.org/packages/aurutils

If you want to do all of this at once, we can chain the commands like so:

```shell
pacman -S --needed git base-devel && git clone https://aur.archlinux.org/yay.git && cd yay && makepkg -si
```

`https://github.com/SolDoesTech/HyprV4.git`

`cd Hypr4`

`y` to wifi powersave

`y`





## Xorg configuration

The proprietary NVIDIA graphics card driver does not need any Xorg server configuration file. You can [start X](https://wiki.archlinux.org/title/Xorg#Running "Xorg") to see if the Xorg server will function correctly without a configuration file. However, it may be required to create a configuration file (prefer `/etc/X11/xorg.conf.d/20-nvidia.conf` over `/etc/X11/xorg.conf`) in order to adjust various settings. This configuration can be generated by the NVIDIA Xorg configuration tool, or it can be created manually. If created manually, it can be a minimal configuration (in the sense that it will only pass the basic options to the [Xorg](https://wiki.archlinux.org/title/Xorg "Xorg") server), or it can include a number of settings that can bypass Xorg's auto-discovered or pre-configured options.

**Tip:** For more configuration options, see [NVIDIA/Troubleshooting](https://wiki.archlinux.org/title/NVIDIA/Troubleshooting "NVIDIA/Troubleshooting").


### Manual configuration

Several tweaks (which cannot be enabled [automatically](https://wiki.archlinux.org/title/NVIDIA#Automatic_configuration) or with [nvidia-settings](https://wiki.archlinux.org/title/NVIDIA#nvidia-settings)) can be performed by editing your configuration file. The Xorg server will need to be restarted before any changes are applied.

See [NVIDIA Accelerated Linux Graphics Driver README and Installation Guide](https://download.nvidia.com/XFree86/Linux-x86_64/525.85.05/README/) for additional details and options.

#### Minimal configuration

A basic configuration block in `20-nvidia.conf` (or deprecated in `xorg.conf`) would look like this:

`/etc/X11/xorg.conf.d/20-nvidia.conf`

Section "Device"
        Identifier "NVIDIA Card"
        Driver "nvidia"
        VendorName "NVIDIA Corporation"
        BoardName "GeForce GTX 1050 Ti"
EndSection

### Build and Test Instruction

```shell
git clone https://github.com/johnfanv2/LenovoLegionLinux.git
cd LenovoLegionLinux/kernel_module
make
sudo make reloadmodule
```

#### Disabling the logo on startup

Add the `"NoLogo"` option under section `Device`:

Option "NoLogo" "1"

#### Overriding monitor detection

The `"ConnectedMonitor"` option under section `Device` allows overriding monitor detection when X server starts, which may save a significant amount of time at start up. The available options are: `"CRT"` for analog connections, `"DFP"` for digital monitors and `"TV"` for televisions.

The following statement forces the NVIDIA driver to bypass startup checks and recognize the monitor as DFP:

Option "ConnectedMonitor" "DFP"

#yaypackagemanager
# yay - arguments
## Examples of Custom Operations

|Command|Description|
|---|---|
|`yay`|Alias to `yay -Syu`.|
|`yay <Search Term>`|Present package-installation selection menu.|
|`yay -Bi <dir>`|Install dependencies and build a local PKGBUILD.|
|`yay -G <AUR Package>`|Download PKGBUILD from ABS or AUR. (yay v12.0+)|
|`yay -Gp <AUR Package>`|Print to stdout PKGBUILD from ABS or AUR.|
|`yay -Ps`|Print system statistics.|
|`yay -Syu --devel`|Perform system upgrade, but also check for development package updates.|
|`yay -Syu --timeupdate`|Perform system upgrade and use PKGBUILD modification time (not version number) to determine update.|
|`yay -Wu <AUR Package>`|Unvote for package (Requires setting `AUR_USERNAME` and `AUR_PASSWORD` environment variables) (yay v11.3+)|
|`yay -Wv <AUR Package>`|Vote for package (Requires setting `AUR_USERNAME` and `AUR_PASSWORD` environment variables). (yay v11.3+)|
|`yay -Y --combinedupgrade --save`|Make combined upgrade the default mode.|
|`yay -Y --gendb`|Generate development package database used for devel update.|
|`yay -Yc`|Clean unneeded dependencies.|
### Yay Command-Line Arguments
|Command|Description|
|---|---|
|`-Syu`|Synchronize package databases and upgrade all packages, including AUR packages.|
|`-S`|Install specified package(s), including from AUR.|
|`-Rs`|Remove specified package(s) and their dependencies not required by any other installed package.|
|`-Yc`|Clean unneeded dependencies (similar to `pacman -Rns $(pacman -Qdtq)`).|
|`-Ss`|Search both official repositories and AUR for matching packages.|
|`-Si`|Display detailed information about a given package from the repositories or AUR.|
|`-Y --gendb`|Generates development package database used for devel updates.|
|`--devel`|Check development packages for updates.|
|`--noconfirm`|Do not prompt for any confirmation (use with caution).|

### Pacman

`pacman` is the official package manager for Arch Linux. It is used to install, update, and remove packages from the official Arch Linux repositories and supports package management for compiled packages in the `.pkg.tar.xz` format. `pacman` does not natively handle packages from the Arch User Repository (AUR).

### Yay
`yay` (Yet Another Yaourt) is a wrapper for `pacman` that extends its functionality to also manage packages from the AUR. `yay` automates the process of downloading, compiling, and installing AUR packages along with their dependencies, providing a seamless integration between official packages and AUR content. It mirrors most `pacman` operations and adds AUR-specific features, making it a convenient all-in-one tool for package management in Arch Linux.

Below are tables summarizing the common command-line arguments for both `pacman` and `yay`. Note that `yay` inherits many of `pacman`'s commands for dealing with repository packages and adds more for AUR interactions.

### Pacman Command-Line Arguments

|Command|Description|
|---|---|
|`-Syu`|Synchronize package databases and upgrade all packages.|
|`-S`|Install specified package(s).|
|`-Rs`|Remove specified package(s) and their dependencies not required by any other installed package.|
|`-Q`|Query the package database.|
|`-Qe`|List explicitly installed packages.|
|`-Qs`|Search for installed packages matching the query.|
|`-Qi`|Display detailed information about a given package.|
|`-Syy`|Force refresh of all package databases.|
|`-U`|Install a package from a local file or URL.|

#### Pacman Examples:

- Update system: `pacman -Syu`
- Install a package: `pacman -S package_name`
- Remove a package and its unused dependencies: `pacman -Rs package_name`
- Search for a package in the database: `pacman -Ss search_term`

### Yay Command-Line Arguments

|Command|Description|
|---|---|
|`-Syu`|Synchronize package databases and upgrade all packages, including AUR packages.|
|`-S`|Install specified package(s), including from AUR.|
|`-Rs`|Remove specified package(s) and their dependencies not required by any other installed package.|
|`-Yc`|Clean unneeded dependencies (similar to `pacman -Rns $(pacman -Qdtq)`).|
|`-Ss`|Search both official repositories and AUR for matching packages.|
|`-Si`|Display detailed information about a given package from the repositories or AUR.|
|`-Y --gendb`|Generates development package database used for devel updates.|
|`--devel`|Check development packages for updates.|
|`--noconfirm`|Do not prompt for any confirmation (use with caution).|

#### Yay Examples:

- Update system including AUR packages: `yay -Syu`
- Install a package from AUR: `yay -S aur_package_name`
- Remove a package and its unused dependencies: `yay -Rs package_name`
- Search for packages in both AUR and official repositories: `yay -Ss search_term`


```
yay -S linux-headers nvidia-dkms qt5-wayland qt5ct libva libva-nvidia-driver-git
```
/etc/mkinitcpio.conf

```
MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm)
```

generate a new initramfs image

```
sudo mkinitcpio --config /etc/mkinitcpio.conf --generate /boot/initramfs-custom.img
```

Create NVIDIA Configuration

```
echo "options nvidia-drm modeset=1" | sudo tee /etc/modprobe.d/nvidia.conf
```

verify

```
cat /etc/modprobe.d/nvidia.conf
```

shoud return:

```
options nvidia-drm modeset=1
```

now reboot

```
reboot
```

Now install the below for Hyprland

```
yay -S hyprland kitty jq mako waybar-hyprland swww swaylock-effects \
wofi wlogout xdg-desktop-portal-hyprland swappy grim slurp thunar \
polkit-gnome python-requests pamixer pavucontrol brightnessctl bluez \
bluez-utils blueman network-manager-applet gvfs thunar-archive-plugin \
file-roller btop pacman-contrib starship ttf-jetbrains-mono-nerd \
noto-fonts-emoji lxappearance xfce4-settings sddm-git sddm-sugar-candy-git 
```

Or you can use the attached script "set-hypr" to install everything for you.
Winows + Q Opens the terminal


### Post-Installation:

After the initial setup and boot into your new Arch system, remember to enable and start essential services like NetworkManager for networking support:

bash

```bash
systemctl enable NetworkManager
systemctl start NetworkManager
```

Using `iwctl` along with `rfkill` and `ip link` can be essential for managing and troubleshooting wireless connections on Arch Linux. Here's a guide to some of the common commands and troubleshooting steps involving these tools.

### iwctl Commands

`iwctl` is a command-line tool for interacting with the iwd (iNet Wireless Daemon), which manages Wi-Fi connections.

- **To start iwctl**: Simply type `iwctl` in the terminal. This will bring you into the iwctl interactive environment.

- **List Wi-Fi devices**:
  ```
  [iwctl]# device list
  ```

- **Scan for Networks**:
  To scan for available Wi-Fi networks, you need to know your device name (e.g., wlan0).
  ```
  [iwctl]# station <device-name> scan
  ```

- **List Available Networks**:
  After scanning, list all the available networks.
  ```
  [iwctl]# station <device-name> get-networks
  ```

- **Connect to a Network**:
  To connect to a network, you need the SSID.
  ```
  [iwctl]# station <device-name> connect <SSID>
  ```
  You'll be prompted for a passphrase if the network is protected.

- **Disconnect from a Network**:
  ```
  [iwctl]# station <device-name> disconnect
  ```

- **Exit iwctl**:
  Simply type `exit` or press Ctrl+D.

### Troubleshooting with iwctl, rfkill, and ip link

1. **Check if the wireless device is blocked**:
   Use `rfkill` to check if any wireless devices are blocked.
   ```
   rfkill list
   ```
   If your device is listed as "Soft blocked" or "Hard blocked", you can unblock it with:
   ```
   rfkill unblock wifi
   ```

2. **Check if the wireless interface is up**:
   `ip link` can be used to check the status of all network interfaces.
   ```
   ip link show
   ```
   If your wireless interface (e.g., wlan0) is DOWN, you can bring it up with:
   ```
   ip link set wlan0 up
   ```

3. **Ensure iwd is active**:
   iwd must be running for `iwctl` to function. To start iwd:
   ```
   sudo systemctl start iwd
   ```
   To enable iwd to start at boot:
   ```
   sudo systemctl enable iwd
   ```

4. **Reconnecting to a Network**:
   If you're having trouble connecting to a network that you've previously connected to, try removing the saved network configuration and reconnecting. This forces you to re-enter the passphrase and can resolve connection issues.
   ```
   [iwctl]# station <device-name> forget <SSID>
   ```

5. **Checking for IP Address**:
   After connecting to a Wi-Fi network, ensure you have received an IP address:
   ```
   ip addr show <device-name>
   ```
   If you don't have an IP address, you may need to restart the DHCP service or configure a static IP address.

These commands and troubleshooting steps can help manage Wi-Fi connections on Arch Linux systems effectively. Remember that exact commands might vary based on your system configuration and the wireless hardware in use.